<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸­æ–‡å–åç¥å™¨ - å®å®èµ·åä¸“å®¶</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', 'å¾®è½¯é›…é»‘', 'STKaiti', 'åæ–‡æ¥·ä½“', serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            padding: 40px 20px;
            position: relative;
        }

        .header::before {
            content: 'ğŸ‘¶';
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2em;
            opacity: 0.3;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-content {
            padding: 40px;
        }

        .input-section {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            color: white;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .input-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .form-group input, .form-group select {
            padding: 12px 15px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            background: rgba(255, 255, 255, 0.9);
            transition: all 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            background: white;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: none;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            box-shadow: 0 5px 20px rgba(240, 147, 251, 0.4);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .results-section {
            margin-top: 30px;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .name-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .name-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .name-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            border-color: #667eea;
        }

        .name-title {
            font-size: 2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            text-align: center;
        }

        .name-details {
            margin-bottom: 15px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            padding: 5px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-label {
            font-weight: bold;
            color: #666;
        }

        .detail-value {
            color: #333;
            font-weight: 500;
        }

        .score {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .meaning {
            background: #f8f9ff;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #667eea;
        }

        .meaning h4 {
            color: #667eea;
            margin-bottom: 8px;
        }

        .name-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9em;
            border-radius: 20px;
        }

        .favorites-section {
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 15px;
            color: #333;
        }

        .favorites-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .favorite-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .favorite-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            display: block;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .input-group {
                grid-template-columns: 1fr;
            }
            
            .button-group {
                flex-direction: column;
                align-items: center;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ‘¶ ä¸­æ–‡å–åç¥å™¨</h1>
            <p>ä¼ æ‰¿æ–‡åŒ–ï¼Œèµ‹äºˆç¾å¥½ - ä¸ºæ‚¨çš„å®å®æ‰¾åˆ°å®Œç¾çš„åå­—</p>
        </div>

        <div class="main-content">
            <div class="input-section">
                <div class="input-group">
                    <div class="form-group">
                        <label for="surname">å§“æ°</label>
                        <input type="text" id="surname" placeholder="è¯·è¾“å…¥å§“æ°" maxlength="2">
                    </div>
                    <div class="form-group">
                        <label for="gender">æ€§åˆ«</label>
                        <select id="gender">
                            <option value="">è¯·é€‰æ‹©æ€§åˆ«</option>
                            <option value="male">ç”·å­©</option>
                            <option value="female">å¥³å­©</option>
                            <option value="unisex">ä¸­æ€§</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="birthDate">å‡ºç”Ÿæ—¥æœŸ</label>
                        <input type="date" id="birthDate">
                    </div>
                    <div class="form-group">
                        <label for="nameLength">åå­—é•¿åº¦</label>
                        <select id="nameLength">
                            <option value="1">å•å­—å</option>
                            <option value="2" selected>åŒå­—å</option>
                        </select>
                    </div>
                </div>

                <div class="input-group">
                    <div class="form-group">
                        <label for="preference">å–ååå¥½</label>
                        <select id="preference">
                            <option value="">è¯·é€‰æ‹©åå¥½</option>
                            <option value="traditional">ä¼ ç»Ÿå…¸é›…</option>
                            <option value="modern">ç°ä»£æ—¶å°š</option>
                            <option value="literary">æ–‡è‰ºè¯—æ„</option>
                            <option value="auspicious">å‰ç¥¥å¯“æ„</option>
                            <option value="unique">ç‹¬ç‰¹ä¸ªæ€§</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="element">äº”è¡Œè¡¥ç¼ºï¼ˆå¯é€‰ï¼‰</label>
                        <select id="element">
                            <option value="">è‡ªåŠ¨åˆ†æ</option>
                            <option value="wood">æœ¨</option>
                            <option value="fire">ç«</option>
                            <option value="earth">åœŸ</option>
                            <option value="metal">é‡‘</option>
                            <option value="water">æ°´</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="avoidCharacters">é¿è®³ç”¨å­—</label>
                        <input type="text" id="avoidCharacters" placeholder="è¯·è¾“å…¥ä¸æƒ³ç”¨çš„å­—ï¼Œç”¨é€—å·åˆ†éš”">
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="generateNames()">ğŸ¯ æ™ºèƒ½å–å</button>
                    <button class="btn btn-secondary" onclick="generateRandomName()">ğŸ² éšæœºå–å</button>
                    <button class="btn btn-secondary" onclick="clearResults()">ğŸ—‘ï¸ æ¸…ç©ºç»“æœ</button>
                </div>
            </div>

            <div class="stats" id="stats" style="display: none;">
                <div class="stat-card">
                    <span class="stat-number" id="generatedCount">0</span>
                    <div class="stat-label">å·²ç”Ÿæˆåå­—</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="favoriteCount">0</span>
                    <div class="stat-label">æ”¶è—åå­—</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="avgScore">0</span>
                    <div class="stat-label">å¹³å‡è¯„åˆ†</div>
                </div>
            </div>

            <div id="loading" class="loading" style="display: none;">
                <div class="spinner"></div>
                <p>æ­£åœ¨ä¸ºæ‚¨ç²¾å¿ƒæŒ‘é€‰å¥½åå­—...</p>
            </div>

            <div class="results-section" id="results" style="display: none;">
                <h2>ğŸŒŸ ä¸ºæ‚¨æ¨èçš„åå­—</h2>
                <div class="results-grid" id="resultsGrid"></div>
            </div>

            <div class="favorites-section" id="favoritesSection" style="display: none;">
                <h2>â¤ï¸ æˆ‘çš„æ”¶è—</h2>
                <div class="favorites-grid" id="favoritesGrid"></div>
                <div class="button-group" style="margin-top: 20px;">
                    <button class="btn btn-secondary" onclick="exportFavorites()">ğŸ“‹ å¯¼å‡ºæ”¶è—</button>
                    <button class="btn btn-secondary" onclick="clearFavorites()">ğŸ—‘ï¸ æ¸…ç©ºæ”¶è—</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ•°æ®é…ç½®
        const config = {
            surnames: ['ç‹', 'æ', 'å¼ ', 'åˆ˜', 'é™ˆ', 'æ¨', 'é»„', 'èµµ', 'å‘¨', 'å´', 'å¾', 'å­™', 'æœ±', 'é©¬', 'èƒ¡', 'éƒ­', 'æ—', 'ä½•', 'é«˜', 'æ¢'],
            
            maleNames: {
                traditional: ['æ–‡', 'æ­¦', 'å¾·', 'ä»', 'ä¹‰', 'ç¤¼', 'æ™º', 'ä¿¡', 'å¿ ', 'å­', 'å‹‡', 'åˆš', 'å¼º', 'å¥', 'æ¯…', 'å³°', 'å±±', 'å·', 'æ²³', 'æµ·'],
                modern: ['å®‡', 'è½©', 'æµ©', 'ç„¶', 'æ³½', 'å®‡', 'å­', 'æ¶µ', 'æ¢“', 'è½©', 'æµ©', 'å®‡', 'å­', 'å¢¨', 'æ¢“', 'è±ª', 'å­', 'ç¿', 'æ¢“', 'å®¸'],
                literary: ['è¯—', 'ä¹¦', 'ç¤¼', 'ä¹', 'ç´', 'æ£‹', 'ä¹¦', 'ç”»', 'å¢¨', 'é¦™', 'ç«¹', 'æ¢…', 'å…°', 'èŠ', 'æ¾', 'æŸ', 'é’', 'å±±', 'ç»¿', 'æ°´'],
                auspicious: ['ç¦', 'ç¦„', 'å¯¿', 'å–œ', 'è´¢', 'å‰', 'ç¥¥', 'å¦‚', 'æ„', 'å®‰', 'åº·', 'å¹³', 'å®‰', 'å¹¸', 'ç¦', 'ç¾', 'æ»¡', 'å›¢', 'åœ†', 'å’Œ'],
                unique: ['éª', 'éª', 'éª', 'éª', 'éª', 'éª', 'éª', 'éª', 'éª', 'éª', 'éª', 'éª', 'éª', 'éª', 'éª', 'éª', 'éª', 'éª', 'éª', 'éª']
            },
            
            femaleNames: {
                traditional: ['æ·‘', 'è´¤', 'æƒ ', 'é›…', 'é™', 'å©‰', 'æŸ”', 'ç¾', 'ä¸½', 'ç«¯', 'åº„', 'ç§€', 'æ…§', 'æ•', 'æ·', 'å·§', 'å¦™', 'ç²', 'ç‘', 'æ™¶'],
                modern: ['æ¬£', 'æ€¡', 'æ¢“', 'è±', 'å­', 'è±', 'è¯—', 'æ¶µ', 'é›¨', 'æ¡', 'è¯­', 'å«£', 'æ€', 'çª', 'æ¢¦', 'ç‘¶', 'å¿ƒ', 'æ€¡', 'è‹¥', 'æ›¦'],
                literary: ['è¯—', 'è¯', 'æ­Œ', 'èµ‹', 'ç´', 'ç‘Ÿ', 'çµ', 'ç¶', 'ä¹¦', 'ç”»', 'å¢¨', 'ç š', 'ç¬”', 'çº¸', 'æ¢…', 'å…°', 'ç«¹', 'èŠ', 'è·', 'è²'],
                auspicious: ['ç¦', 'ç¦„', 'å¯¿', 'å–œ', 'è´¢', 'å‰', 'ç¥¥', 'å¦‚', 'æ„', 'å®‰', 'åº·', 'å¹³', 'å®‰', 'å¹¸', 'ç¦', 'ç¾', 'æ»¡', 'ç”œ', 'èœœ', 'ä¹'],
                unique: ['å«£', 'å«£', 'å«£', 'å«£', 'å«£', 'å«£', 'å«£', 'å«£', 'å«£', 'å«£', 'å«£', 'å«£', 'å«£', 'å«£', 'å«£', 'å«£', 'å«£', 'å«£', 'å«£', 'å«£']
            },
            
            unisexNames: ['æ™¨', 'æ›¦', 'æ™“', 'æ˜', 'å…‰', 'äº®', 'æ˜Ÿ', 'æœˆ', 'äº‘', 'éœ', 'é£', 'é›¨', 'é›ª', 'éœœ', 'æ˜¥', 'å¤', 'ç§‹', 'å†¬', 'ä¸œ', 'å—'],
            
            elements: {
                wood: ['æœ¨', 'æ—', 'æ£®', 'æ¾', 'æŸ', 'æŸ³', 'æ¡', 'æ¢“', 'æ ‹', 'æ¢', 'æŸ±', 'æ', 'æ ‘', 'æ', 'å¶', 'èŠ±', 'è‰', 'ç«¹', 'è²', 'è·'],
                fire: ['ç«', 'ç‚', 'ç„±', 'ç‡š', 'å…‰', 'æ˜', 'äº®', 'ç…§', 'è¾‰', 'ç…Œ', 'ç¿', 'çƒ‚', 'ç„°', 'ç¯', 'çƒ›', 'ç‚‰', 'ç‚®', 'çƒŸ', 'çƒ­', 'æš–'],
                earth: ['åœŸ', 'åœ°', 'å±±', 'å·', 'æ²³', 'å²³', 'å³°', 'å²­', 'å²—', 'å¡', 'åŸ', 'å ¡', 'å¢™', 'å¡”', 'å›', 'åœº', 'åŸº', 'å€', 'åŠ', 'å—'],
                metal: ['é‡‘', 'é“¶', 'é“œ', 'é“', 'é’¢', 'é“', 'é”¡', 'é“…', 'é’Ÿ', 'é“ƒ', 'é”£', 'é¼“', 'ç´', 'ç‘Ÿ', 'é’¥', 'é”', 'é’±', 'å¸', 'å®', 'ç '],
                water: ['æ°´', 'æ³‰', 'æ²³', 'æ¹–', 'æµ·', 'æ´‹', 'æ±Ÿ', 'æ²³', 'æºª', 'æµ', 'æ³¢', 'æµª', 'æ¶›', 'æ½®', 'æ± ', 'å¡˜', 'æ³½', 'æ¶¦', 'æ¹¿', 'æ·¡']
            },
            
            meanings: {
                'æ–‡': 'æ–‡é‡‡æ–ç„¶ï¼Œå­¦è¯†æ¸Šåš', 'æ­¦': 'å‹‡æ­¦åˆšå¼ºï¼Œåšæ¯…æœæ•¢', 'å¾·': 'å“å¾·é«˜å°šï¼Œé“å¾·å®Œå¤‡', 'ä»': 'ä»çˆ±å–„è‰¯ï¼Œå®½åšå¾…äºº',
                'ä¹‰': 'æ­£ä¹‰å‡›ç„¶ï¼Œä»—ä¹‰æ‰§è¨€', 'ç¤¼': 'ç¤¼è²Œè°¦é€Šï¼ŒçŸ¥ä¹¦è¾¾ç†', 'æ™º': 'æ™ºæ…§è¿‡äººï¼Œèªæ˜ç¿æ™º', 'ä¿¡': 'è¯šå®å®ˆä¿¡ï¼Œè¨€å‡ºå¿…è¡Œ',
                'å¿ ': 'å¿ è¯šå¯é ï¼Œå¿ å¿ƒè€¿è€¿', 'å­': 'å­é¡ºçˆ¶æ¯ï¼Œå°Šè€çˆ±å¹¼', 'å‹‡': 'å‹‡æ•¢æ— ç•ï¼Œå‹‡å¾€ç›´å‰', 'åˆš': 'åˆšå¼ºåšæ¯…ï¼Œä¸å±ˆä¸æŒ ',
                'å¼º': 'åšå¼ºæœ‰åŠ›ï¼Œè‡ªå¼ºä¸æ¯', 'å¥': 'å¥åº·å¼ºå£®ï¼Œç²¾åŠ›å……æ²›', 'æ¯…': 'æ¯…åŠ›éå‡¡ï¼ŒæŒä¹‹ä»¥æ’', 'å³°': 'ç™»å³°é€ æï¼Œå¿—å‘é«˜è¿œ',
                'å±±': 'ç¨³å¦‚æ³°å±±ï¼Œåšå®šä¸ç§»', 'å·': 'èƒ¸æ€€å®½å¹¿ï¼Œæ°”åº¦éå‡¡', 'æ²³': 'ç”Ÿç”Ÿä¸æ¯ï¼Œæºè¿œæµé•¿', 'æµ·': 'èƒ¸æ€€å®½å¹¿ï¼ŒåŒ…å®¹ä¸‡ç‰©',
                'æ·‘': 'æ·‘å¥³ç«¯åº„ï¼Œæ¸©æŸ”è´¤æ·‘', 'è´¤': 'è´¤è‰¯æ·‘å¾·ï¼Œæ‰å¾·å…¼å¤‡', 'æƒ ': 'è´¤æƒ å–„è‰¯ï¼Œæ¸©æŸ”ä½“è´´', 'é›…': 'ä¼˜é›…å¤§æ–¹ï¼Œæ–‡é›…ç«¯åº„',
                'é™': 'å®‰é™æ¬æ·¡ï¼Œæ–‡é™ä¼˜é›…', 'å©‰': 'å©‰çº¦æ¸©æŸ”ï¼Œå–„è§£äººæ„', 'æŸ”': 'æ¸©æŸ”ä½“è´´ï¼ŒæŸ”ä¸­å¸¦åˆš', 'ç¾': 'ç¾ä¸½å¤§æ–¹ï¼Œç¾å¥½å–„è‰¯',
                'ä¸½': 'ç§€ä¸½ç«¯åº„ï¼Œç¾ä¸½åŠ¨äºº', 'ç«¯': 'ç«¯åº„å¤§æ–¹ï¼Œä¸¾æ­¢å¾—ä½“', 'åº„': 'åº„é‡å…¸é›…ï¼Œç¨³é‡å¤§æ–¹', 'ç§€': 'ç§€ä¸½ç«¯åº„ï¼Œæ‰åå‡ºä¼—',
                'æ…§': 'èªæ…§è¿‡äººï¼Œæ™ºæ…§éå‡¡', 'æ•': 'æ•é”èªæ…§ï¼Œååº”æ•æ·', 'æ·': 'æ•æ·è¿…é€Ÿï¼Œæ‰æ€æ•æ·', 'å·§': 'å¿ƒçµæ‰‹å·§ï¼Œå·§å¦™ç²¾è‡´',
                'å¦™': 'å¦™ä¸å¯è¨€ï¼Œç²¾å¦™ç»ä¼¦', 'ç²': 'ç²ç‘å‰”é€ï¼Œèªæ˜ä¼¶ä¿', 'ç‘': 'ç²ç‘ç²¾è‡´ï¼Œå‰”é€æ™¶è¹', 'æ™¶': 'æ™¶è¹å‰”é€ï¼Œçº¯å‡€ç¾å¥½'
            }
        };

        let favorites = JSON.parse(localStorage.getItem('favoriteNames') || '[]');
        let generatedNames = [];

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateFavoritesDisplay();
            updateStats();
            
            // è®¾ç½®é»˜è®¤æ—¥æœŸä¸ºä»Šå¤©
            document.getElementById('birthDate').valueAsDate = new Date();
        });

        // ç”Ÿæˆåå­—
        function generateNames() {
            const surname = document.getElementById('surname').value.trim();
            const gender = document.getElementById('gender').value;
            const nameLength = parseInt(document.getElementById('nameLength').value);
            const preference = document.getElementById('preference').value;
            const element = document.getElementById('element').value;
            const avoidCharacters = document.getElementById('avoidCharacters').value.split(',').map(c => c.trim());

            if (!surname) {
                alert('è¯·è¾“å…¥å§“æ°ï¼');
                return;
            }

            if (!gender) {
                alert('è¯·é€‰æ‹©æ€§åˆ«ï¼');
                return;
            }

            showLoading(true);

            // æ¨¡æ‹Ÿå¼‚æ­¥å¤„ç†
            setTimeout(() => {
                const names = generateNameList(surname, gender, nameLength, preference, element, avoidCharacters);
                displayResults(names);
                showLoading(false);
                updateStats();
            }, 1500);
        }

        // ç”Ÿæˆåå­—åˆ—è¡¨
        function generateNameList(surname, gender, nameLength, preference, element, avoidCharacters) {
            const names = [];
            const count = 12; // ç”Ÿæˆ12ä¸ªåå­—

            for (let i = 0; i < count; i++) {
                const name = generateSingleName(surname, gender, nameLength, preference, element, avoidCharacters);
                names.push(name);
            }

            return names;
        }

        // ç”Ÿæˆå•ä¸ªåå­—
        function generateSingleName(surname, gender, nameLength, preference, element, avoidCharacters) {
            let nameChars = [];
            
            // ç¡®å®šåå­—æ¥æº
            let namePool = [];
            if (gender === 'male') {
                namePool = preference ? config.maleNames[preference] : [...config.maleNames.traditional, ...config.maleNames.modern];
            } else if (gender === 'female') {
                namePool = preference ? config.femaleNames[preference] : [...config.femaleNames.traditional, ...config.femaleNames.modern];
            } else {
                namePool = config.unisexNames;
            }

            // å¦‚æœæŒ‡å®šäº†äº”è¡Œï¼Œä¼˜å…ˆä½¿ç”¨å¯¹åº”å…ƒç´ çš„å­—
            if (element && config.elements[element]) {
                namePool = [...config.elements[element], ...namePool];
            }

            // è¿‡æ»¤é¿è®³å­—ç¬¦
            namePool = namePool.filter(char => !avoidCharacters.includes(char));

            // ç”Ÿæˆåå­—
            for (let i = 0; i < nameLength; i++) {
                const randomChar = namePool[Math.floor(Math.random() * namePool.length)];
                nameChars.push(randomChar);
            }

            const fullName = surname + nameChars.join('');
            
            // è®¡ç®—è¯„åˆ†
            const score = calculateScore(fullName, gender, preference, element);
            
            // è·å–å«ä¹‰
            const meaning = getNameMeaning(nameChars);
            
            // äº”è¡Œåˆ†æ
            const elementAnalysis = analyzeElements(fullName);

            return {
                name: fullName,
                surname: surname,
                givenName: nameChars.join(''),
                score: score,
                meaning: meaning,
                element: elementAnalysis,
                gender: gender,
                preference: preference
            };
        }

        // è®¡ç®—åå­—è¯„åˆ†
        function calculateScore(name, gender, preference, element) {
            let score = 60; // åŸºç¡€åˆ†
            
            // æ€§åˆ«é€‚é…åŠ åˆ†
            if (gender && preference) {
                score += 15;
            }
            
            // äº”è¡Œå¹³è¡¡åŠ åˆ†
            if (element) {
                score += 10;
            }
            
            // éŸ³éŸµæ­é…åŠ åˆ†
            if (name.length <= 3) {
                score += 10;
            }
            
            // éšæœºå› ç´ 
            score += Math.floor(Math.random() * 15);
            
            return Math.min(score, 100);
        }

        // è·å–åå­—å«ä¹‰
        function getNameMeaning(nameChars) {
            const meanings = [];
            for (let char of nameChars) {
                if (config.meanings[char]) {
                    meanings.push(`${char}: ${config.meanings[char]}`);
                }
            }
            return meanings.join('ï¼›');
        }

        // äº”è¡Œåˆ†æ
        function analyzeElements(name) {
            const elementCounts = {
                wood: 0, fire: 0, earth: 0, metal: 0, water: 0
            };
            
            // ç®€åŒ–çš„äº”è¡Œåˆ†æ
            for (let char of name) {
                for (let [element, chars] of Object.entries(config.elements)) {
                    if (chars.includes(char)) {
                        elementCounts[element]++;
                    }
                }
            }
            
            return elementCounts;
        }

        // æ˜¾ç¤ºç»“æœ
        function displayResults(names) {
            generatedNames = names;
            const resultsGrid = document.getElementById('resultsGrid');
            const resultsSection = document.getElementById('results');
            
            resultsGrid.innerHTML = '';
            
            names.forEach((nameObj, index) => {
                const nameCard = createNameCard(nameObj, index);
                resultsGrid.appendChild(nameCard);
            });
            
            resultsSection.style.display = 'block';
            resultsSection.scrollIntoView({ behavior: 'smooth' });
        }

        // åˆ›å»ºåå­—å¡ç‰‡
        function createNameCard(nameObj, index) {
            const card = document.createElement('div');
            card.className = 'name-card fade-in';
            card.style.animationDelay = `${index * 0.1}s`;
            
            const isFavorite = favorites.some(fav => fav.name === nameObj.name);
            
            card.innerHTML = `
                <div class="name-title">${nameObj.name}</div>
                <div class="name-details">
                    <div class="detail-item">
                        <span class="detail-label">ç»¼åˆè¯„åˆ†</span>
                        <span class="score">${nameObj.score}åˆ†</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">æ€§åˆ«é€‚é…</span>
                        <span class="detail-value">${getGenderText(nameObj.gender)}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">é£æ ¼ç±»å‹</span>
                        <span class="detail-value">${getPreferenceText(nameObj.preference)}</span>
                    </div>
                </div>
                <div class="meaning">
                    <h4>ğŸ’« åå­—å¯“æ„</h4>
                    <p>${nameObj.meaning || 'æ­¤åå­—å¯“æ„ç¾å¥½ï¼ŒéŸ³éŸµå’Œè°'}</p>
                </div>
                <div class="name-actions">
                    <button class="btn btn-small ${isFavorite ? 'btn-secondary' : 'btn-primary'}" onclick="toggleFavorite(${index})">
                        ${isFavorite ? 'â¤ï¸ å·²æ”¶è—' : 'ğŸ¤ æ”¶è—'}
                    </button>
                    <button class="btn btn-small btn-secondary" onclick="shareName('${nameObj.name}')">
                        ğŸ“¤ åˆ†äº«
                    </button>
                </div>
            `;
            
            return card;
        }

        // éšæœºå–å
        function generateRandomName() {
            // éšæœºé€‰æ‹©å‚æ•°
            const randomSurname = config.surnames[Math.floor(Math.random() * config.surnames.length)];
            const randomGender = ['male', 'female', 'unisex'][Math.floor(Math.random() * 3)];
            const randomNameLength = Math.random() > 0.3 ? 2 : 1;
            
            document.getElementById('surname').value = randomSurname;
            document.getElementById('gender').value = randomGender;
            document.getElementById('nameLength').value = randomNameLength;
            
            generateNames();
        }

        // åˆ‡æ¢æ”¶è—
        function toggleFavorite(index) {
            const nameObj = generatedNames[index];
            const existingIndex = favorites.findIndex(fav => fav.name === nameObj.name);
            
            if (existingIndex >= 0) {
                favorites.splice(existingIndex, 1);
            } else {
                favorites.push(nameObj);
            }
            
            localStorage.setItem('favoriteNames', JSON.stringify(favorites));
            displayResults(generatedNames); // åˆ·æ–°æ˜¾ç¤º
            updateFavoritesDisplay();
            updateStats();
        }

        // æ›´æ–°æ”¶è—æ˜¾ç¤º
        function updateFavoritesDisplay() {
            const favoritesGrid = document.getElementById('favoritesGrid');
            const favoritesSection = document.getElementById('favoritesSection');
            
            if (favorites.length === 0) {
                favoritesSection.style.display = 'none';
                return;
            }
            
            favoritesSection.style.display = 'block';
            favoritesGrid.innerHTML = '';
            
            favorites.forEach((fav, index) => {
                const item = document.createElement('div');
                item.className = 'favorite-item fade-in';
                item.innerHTML = `
                    <div style="font-size: 1.5em; font-weight: bold; margin-bottom: 8px;">${fav.name}</div>
                    <div style="color: #666; font-size: 0.9em;">${fav.score}åˆ†</div>
                    <button class="btn btn-small" style="margin-top: 10px; background: #ff6b6b;" onclick="removeFavorite(${index})">
                        ç§»é™¤
                    </button>
                `;
                favoritesGrid.appendChild(item);
            });
        }

        // ç§»é™¤æ”¶è—
        function removeFavorite(index) {
            favorites.splice(index, 1);
            localStorage.setItem('favoriteNames', JSON.stringify(favorites));
            updateFavoritesDisplay();
            updateStats();
            
            if (generatedNames.length > 0) {
                displayResults(generatedNames); // åˆ·æ–°ç»“æœé¡µé¢
            }
        }

        // åˆ†äº«åå­—
        function shareName(name) {
            if (navigator.share) {
                navigator.share({
                    title: 'ä¸­æ–‡å–åç¥å™¨æ¨è',
                    text: `ä¸ºæ‚¨æ¨èå¥½åå­—ï¼š${name}`,
                    url: window.location.href
                });
            } else {
                // å¤åˆ¶åˆ°å‰ªè´´æ¿
                const text = `ä¸­æ–‡å–åç¥å™¨ä¸ºæ‚¨æ¨èï¼š${name}`;
                navigator.clipboard.writeText(text).then(() => {
                    alert('åå­—å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
                });
            }
        }

        // å¯¼å‡ºæ”¶è—
        function exportFavorites() {
            if (favorites.length === 0) {
                alert('æš‚æ— æ”¶è—çš„åå­—ï¼');
                return;
            }
            
            let content = 'ä¸­æ–‡å–åç¥å™¨ - æˆ‘çš„æ”¶è—\n';
            content += 'ç”Ÿæˆæ—¶é—´ï¼š' + new Date().toLocaleString() + '\n\n';
            
            favorites.forEach((fav, index) => {
                content += `${index + 1}. ${fav.name} (${fav.score}åˆ†)\n`;
                content += `   å¯“æ„ï¼š${fav.meaning || 'éŸ³éŸµå’Œè°ï¼Œå¯“æ„ç¾å¥½'}\n\n`;
            });
            
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'å®å®åå­—æ”¶è—.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        // æ¸…ç©ºç»“æœ
        function clearResults() {
            document.getElementById('results').style.display = 'none';
            generatedNames = [];
        }

        // æ¸…ç©ºæ”¶è—
        function clearFavorites() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ”¶è—å—ï¼Ÿ')) {
                favorites = [];
                localStorage.setItem('favoriteNames', JSON.stringify(favorites));
                updateFavoritesDisplay();
                updateStats();
                
                if (generatedNames.length > 0) {
                    displayResults(generatedNames);
                }
            }
        }

        // æ›´æ–°ç»Ÿè®¡
        function updateStats() {
            const statsSection = document.getElementById('stats');
            
            if (generatedNames.length === 0 && favorites.length === 0) {
                statsSection.style.display = 'none';
                return;
            }
            
            statsSection.style.display = 'grid';
            
            document.getElementById('generatedCount').textContent = generatedNames.length;
            document.getElementById('favoriteCount').textContent = favorites.length;
            
            const avgScore = generatedNames.length > 0 ? 
                Math.round(generatedNames.reduce((sum, name) => sum + name.score, 0) / generatedNames.length) : 0;
            document.getElementById('avgScore').textContent = avgScore;
        }

        // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
        }

        // è¾…åŠ©å‡½æ•°
        function getGenderText(gender) {
            const map = { male: 'ç”·å­©', female: 'å¥³å­©', unisex: 'ä¸­æ€§' };
            return map[gender] || 'æœªæŒ‡å®š';
        }

        function getPreferenceText(preference) {
            const map = {
                traditional: 'ä¼ ç»Ÿå…¸é›…',
                modern: 'ç°ä»£æ—¶å°š',
                literary: 'æ–‡è‰ºè¯—æ„',
                auspicious: 'å‰ç¥¥å¯“æ„',
                unique: 'ç‹¬ç‰¹ä¸ªæ€§'
            };
            return map[preference] || 'é€šç”¨';
        }
    </script>
</body>
</html>